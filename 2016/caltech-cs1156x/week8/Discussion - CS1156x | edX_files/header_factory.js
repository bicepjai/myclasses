(function(){RequireJS.define("edx-ui-toolkit/js/utils/constants",[],function(){return{keyCodes:{tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40}}})}).call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:"undefined"!=typeof RequireJS?RequireJS.define:edx.GlobalLoader.defineAs("constants","edx-ui-toolkit/js/utils/constants")),RequireJS.define("text",{load:function(n){throw new Error("Dynamic load not allowed: "+n)}}),RequireJS.define("text!edx-ui-toolkit/js/dropdown-menu/dropdown.underscore",[],function(){return'<a href="<%- main.url %>" class="menu-title">\n    <% if (main.screenreader_label) { %>\n        <span class="sr-only"><%- main.screenreader_label %> </span>\n    <% } %>\n    <% if (main.image) { %>\n        <img class="menu-image" src="<%- main.image %>" alt="">\n    <% } %>\n    <%- main.text %>\n</a>\n<button type="button" class="menu-button button-more has-dropdown js-dropdown-button <% if (!button.icon) { %>default-icon<% } %>" aria-haspopup="true" aria-expanded="false" aria-controls="<%- menuId %>">\n    <% if (button.icon) { %>\n        <span class="icon <%- button.icon %>" aria-hidden="true"></span>\n    <% } %>\n    <span class="sr-only"><%- button.label %></span>\n</button>\n<ul class="dropdown-menu list-divided is-hidden" id="<%- menuId %>" tabindex="-1">\n    <% _.each(items, function(item, index) { %>\n        <li class="dropdown-item item has-block-link">\n            <a href="<%- item.url %>" class="action"><%- item.text %></a>\n        </li>\n    <% }); %>\n</ul>\n'}),function(){RequireJS.define("edx-ui-toolkit/js/dropdown-menu/dropdown-menu-view",["backbone","jquery","underscore","edx-ui-toolkit/js/utils/constants","text!./dropdown.underscore"],function(n,e,t,i,o){var s=n.View.extend({tpl:t.template(o),events:{"click .js-dropdown-button":"clickOpenDropdown","click a":"analyticsLinkClick",keydown:"viewKeypress"},dropdownButton:".js-dropdown-button",menu:".dropdown-menu",initialize:function(n){n.parent&&(this.$parent=e(n.parent)),this.menuId=n.menuId||"dropdown-menu-"+this.cid,this.keyBack=[i.keyCodes.up,i.keyCodes.left],this.keyForward=[i.keyCodes.down,i.keyCodes.right],this.keyClose=[i.keyCodes.esc,i.keyCodes.space]},className:function(){return this.options.className},render:function(){return this.model.set({menuId:this.menuId}),this.$el.html(this.tpl(this.model.toJSON())),this.$parent.replaceWith(this.$el),this.postRender(),this},postRender:function(){this.$menu=this.$(".dropdown-menu"),this.$page=e(document),this.$dropdownButton=this.$(this.dropdownButton),this.$lastItem=this.$menu.find("li:last-child a")},analyticsLinkClick:function(n){return n},clickCloseDropdown:function(n,t){var i,o=e(n.target)||e(document);o.hasClass(this.dropdownButton)||(i=o.closest(this.dropdownButton),i.length>0&&(o=i)),o.hasClass("button-more")||o.hasClass("has-dropdown")||t.closeDropdownMenu()},clickOpenDropdown:function(n){n.preventDefault(),this.openMenu(this.$dropdownButton)},closeDropdownMenu:function(){var n=this.$(this.menu);n.removeClass("is-visible").addClass("is-hidden"),this.$dropdownButton.removeClass("is-active").attr("aria-expanded","false")},focusFirstItem:function(){this.$menu.find(".dropdown-item:first-child .action").focus()},focusLastItem:function(){this.$lastItem.focus()},handlerIsAction:function(n,e){t.contains(this.keyForward,n)?this.nextMenuItemLink(e):t.contains(this.keyBack,n)&&this.previousMenuItemLink(e)},handlerIsButton:function(n,e){t.contains(this.keyForward,n)?this.focusFirstItem():(t.contains(this.keyBack,n)||n===i.keyCodes.tab&&e.shiftKey)&&(e.preventDefault(),this.focusLastItem())},handlerIsMenu:function(n){t.contains(this.keyForward,n)?this.focusFirstItem():t.contains(this.keyBack,n)&&this.$dropdownButton.focus()},handlerPageClicks:function(n){this.$page.off("click.dropdown"),this.$page.on("click.dropdown",function(e){n.clickCloseDropdown(e,n)})},nextMenuItemLink:function(n){var e=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),t=e.length-1,i=e.index(n),o=i+1;i===t?this.$dropdownButton.focus():e.eq(o).focus()},openMenu:function(n){var e=this.$menu;e.hasClass("is-visible")?this.closeDropdownMenu():(n.addClass("is-active").attr("aria-expanded","true"),e.removeClass("is-hidden").addClass("is-visible"),e.focus(),this.setOrientation(),this.handlerPageClicks(this))},previousMenuItemLink:function(n){var e=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),t=e.index(n),i=t-1;0===t?this.$dropdownButton.focus():e.eq(i).focus()},setOrientation:function(){var n=e(window).width()/2,t=this.$dropdownButton.offset().left>n?"align-right":"align-left";this.$menu.removeClass("align-left align-right").addClass(t)},viewKeypress:function(n){var o=n.keyCode,s=e(n.target);(t.contains(this.keyForward,o)||t.contains(this.keyBack,o))&&n.preventDefault(),o!==i.keyCodes.tab||n.shiftKey||t.first(s)!==t.first(this.$lastItem)?t.contains(this.keyClose,o)?(this.closeDropdownMenu(),this.$dropdownButton.focus()):s.hasClass("action")?this.handlerIsAction(o,s):s.hasClass("dropdown-menu")?this.handlerIsMenu(o):s.hasClass("has-dropdown")&&this.handlerIsButton(o,n):(n.preventDefault(),this.$dropdownButton.focus())}});return s})}.call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:RequireJS.define),function(){RequireJS.define("js/header_factory",["edx-ui-toolkit/js/dropdown-menu/dropdown-menu-view"],function(n){return function(){var e=new n({el:".js-header-user-menu"}).postRender();return e}})}.call(this,define||RequireJS.define);